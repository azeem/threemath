!function(){Math3={},Math3.Box2=function(t,i){this.min=void 0!==t?t:new Math3.Vector2(1/0,1/0),this.max=void 0!==i?i:new Math3.Vector2(-(1/0),-(1/0))},Math3.Box2.prototype={constructor:Math3.Box2,set:function(t,i){return this.min.copy(t),this.max.copy(i),this},setFromPoints:function(t){this.makeEmpty();for(var i=0,n=t.length;n>i;i++)this.expandByPoint(t[i]);return this},setFromCenterAndSize:function(){var t=new Math3.Vector2;return function(i,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(i).sub(r),this.max.copy(i).add(r),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){var i=t||new Math3.Vector2;return i.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var i=t||new Math3.Vector2;return i.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y?!0:!1},getParameter:function(t,i){var n=i||new Math3.Vector2;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y?!1:!0},clampPoint:function(t,i){var n=i||new Math3.Vector2;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new Math3.Vector2;return function(i){var n=t.copy(i).clamp(this.min,this.max);return n.sub(i).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new Math3.Box2).copy(this)}},Math3.Box3=function(t,i){this.min=void 0!==t?t:new Math3.Vector3(1/0,1/0,1/0),this.max=void 0!==i?i:new Math3.Vector3(-(1/0),-(1/0),-(1/0))},Math3.Box3.prototype={constructor:Math3.Box3,set:function(t,i){return this.min.copy(t),this.max.copy(i),this},setFromPoints:function(t){this.makeEmpty();for(var i=0,n=t.length;n>i;i++)this.expandByPoint(t[i]);return this},setFromCenterAndSize:function(){var t=new Math3.Vector3;return function(i,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(i).sub(r),this.max.copy(i).add(r),this}}(),setFromObject:function(){var t=new Math3.Vector3;return function(i){var n=this;return i.updateMatrixWorld(!0),this.makeEmpty(),i.traverse(function(i){var r=i.geometry;if(void 0!==r)if(r instanceof Math3.Geometry)for(var e=r.vertices,s=0,h=e.length;h>s;s++)t.copy(e[s]),t.applyMatrix4(i.matrixWorld),n.expandByPoint(t);else if(r instanceof Math3.BufferGeometry&&void 0!==r.attributes.position)for(var a=r.attributes.position.array,s=0,h=a.length;h>s;s+=3)t.set(a[s],a[s+1],a[s+2]),t.applyMatrix4(i.matrixWorld),n.expandByPoint(t)}),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){var i=t||new Math3.Vector3;return i.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var i=t||new Math3.Vector3;return i.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z?!0:!1},getParameter:function(t,i){var n=i||new Math3.Vector3;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z?!1:!0},clampPoint:function(t,i){var n=i||new Math3.Vector3;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new Math3.Vector3;return function(i){var n=t.copy(i).clamp(this.min,this.max);return n.sub(i).length()}}(),getBoundingSphere:function(){var t=new Math3.Vector3;return function(i){var n=i||new Math3.Sphere;return n.center=this.center(),n.radius=.5*this.size(t).length(),n}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new Math3.Vector3,new Math3.Vector3,new Math3.Vector3,new Math3.Vector3,new Math3.Vector3,new Math3.Vector3,new Math3.Vector3,new Math3.Vector3];return function(i){return t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(i),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(i),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(i),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(i),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(i),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(i),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(i),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(i),this.makeEmpty(),this.setFromPoints(t),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new Math3.Box3).copy(this)}},Math3.Color=function(t){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(t)},Math3.Color.prototype={constructor:Math3.Color,r:1,g:1,b:1,set:function(t){return t instanceof Math3.Color?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,i,n){return this.r=t,this.g=i,this.b=n,this},setHSL:function(t,i,n){if(0===i)this.r=this.g=this.b=n;else{var r=function(t,i,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(i-t)*n:.5>n?i:2/3>n?t+6*(i-t)*(2/3-n):t},e=.5>=n?n*(1+i):n+i-n*i,s=2*n-e;this.r=r(s,e,t+1/3),this.g=r(s,e,t),this.b=r(s,e,t-1/3)}return this},setStyle:function(t){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(t)){var i=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(t);return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(t)){var i=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(t);return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(t)){var i=/^\#([0-9a-f]{6})$/i.exec(t);return this.setHex(parseInt(i[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(t)){var i=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t);return this.setHex(parseInt(i[1]+i[1]+i[2]+i[2]+i[3]+i[3],16)),this}return/^(\w+)$/i.test(t)?(this.setHex(Math3.ColorKeywords[t]),this):void 0},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,i){return void 0===i&&(i=2),this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},copyLinearToGamma:function(t,i){void 0===i&&(i=2);var n=i>0?1/i:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,i=this.g,n=this.b;return this.r=t*t,this.g=i*i,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var i,n,r=t||{h:0,s:0,l:0},e=this.r,s=this.g,h=this.b,a=Math.max(e,s,h),o=Math.min(e,s,h),u=(o+a)/2;if(o===a)i=0,n=0;else{var c=a-o;switch(n=.5>=u?c/(a+o):c/(2-a-o),a){case e:i=(s-h)/c+(h>s?6:0);break;case s:i=(h-e)/c+2;break;case h:i=(e-s)/c+4}i/=6}return r.h=i,r.s=n,r.l=u,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,i,n){var r=this.getHSL();return r.h+=t,r.s+=i,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t){return this.r=t[0],this.g=t[1],this.b=t[2],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t},clone:function(){return(new Math3.Color).setRGB(this.r,this.g,this.b)}},Math3.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Math3.Euler=function(t,i,n,r){this._x=t||0,this._y=i||0,this._z=n||0,this._order=r||Math3.Euler.DefaultOrder},Math3.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Math3.Euler.DefaultOrder="XYZ",Math3.Euler.prototype={constructor:Math3.Euler,_x:0,_y:0,_z:0,_order:Math3.Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,i,n,r){return this._x=t,this._y=i,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,i,n){var r=Math3.Math.clamp,e=t.elements,s=e[0],h=e[4],a=e[8],o=e[1],u=e[5],c=e[9],l=e[2],y=e[6],m=e[10];return i=i||this._order,"XYZ"===i?(this._y=Math.asin(r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-h,s)):(this._x=Math.atan2(y,u),this._z=0)):"YXZ"===i?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(a,m),this._z=Math.atan2(o,u)):(this._y=Math.atan2(-l,s),this._z=0)):"ZXY"===i?(this._x=Math.asin(r(y,-1,1)),Math.abs(y)<.99999?(this._y=Math.atan2(-l,m),this._z=Math.atan2(-h,u)):(this._y=0,this._z=Math.atan2(o,s))):"ZYX"===i?(this._y=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(y,m),this._z=Math.atan2(o,s)):(this._x=0,this._z=Math.atan2(-h,u))):"YZX"===i?(this._z=Math.asin(r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,s)):(this._x=0,this._y=Math.atan2(a,m))):"XZY"===i?(this._z=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(y,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,m),this._y=0)):Math3.warn("Math3.Euler: .setFromRotationMatrix() given unsupported order: "+i),this._order=i,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(i,n,r){return void 0===t&&(t=new Math3.Matrix4),t.makeRotationFromQuaternion(i),this.setFromRotationMatrix(t,n,r),this}}(),setFromVector3:function(t,i){return this.set(t.x,t.y,t.z,i||this._order)},reorder:function(){var t=new Math3.Quaternion;return function(i){t.setFromEuler(this),this.setFromQuaternion(t,i)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new Math3.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new Math3.Euler(this._x,this._y,this._z,this._order)}},Math3.Frustum=function(t,i,n,r,e,s){this.planes=[void 0!==t?t:new Math3.Plane,void 0!==i?i:new Math3.Plane,void 0!==n?n:new Math3.Plane,void 0!==r?r:new Math3.Plane,void 0!==e?e:new Math3.Plane,void 0!==s?s:new Math3.Plane]},Math3.Frustum.prototype={constructor:Math3.Frustum,set:function(t,i,n,r,e,s){var h=this.planes;return h[0].copy(t),h[1].copy(i),h[2].copy(n),h[3].copy(r),h[4].copy(e),h[5].copy(s),this},copy:function(t){for(var i=this.planes,n=0;6>n;n++)i[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var i=this.planes,n=t.elements,r=n[0],e=n[1],s=n[2],h=n[3],a=n[4],o=n[5],u=n[6],c=n[7],l=n[8],y=n[9],m=n[10],x=n[11],f=n[12],d=n[13],M=n[14],p=n[15];return i[0].setComponents(h-r,c-a,x-l,p-f).normalize(),i[1].setComponents(h+r,c+a,x+l,p+f).normalize(),i[2].setComponents(h+e,c+o,x+y,p+d).normalize(),i[3].setComponents(h-e,c-o,x-y,p-d).normalize(),i[4].setComponents(h-s,c-u,x-m,p-M).normalize(),i[5].setComponents(h+s,c+u,x+m,p+M).normalize(),this},intersectsObject:function(){var t=new Math3.Sphere;return function(i){var n=i.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere),t.applyMatrix4(i.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var i=this.planes,n=t.center,r=-t.radius,e=0;6>e;e++){var s=i[e].distanceToPoint(n);if(r>s)return!1}return!0},intersectsBox:function(){var t=new Math3.Vector3,i=new Math3.Vector3;return function(n){for(var r=this.planes,e=0;6>e;e++){var s=r[e];t.x=s.normal.x>0?n.min.x:n.max.x,i.x=s.normal.x>0?n.max.x:n.min.x,t.y=s.normal.y>0?n.min.y:n.max.y,i.y=s.normal.y>0?n.max.y:n.min.y,t.z=s.normal.z>0?n.min.z:n.max.z,i.z=s.normal.z>0?n.max.z:n.min.z;var h=s.distanceToPoint(t),a=s.distanceToPoint(i);if(0>h&&0>a)return!1}return!0}}(),containsPoint:function(t){for(var i=this.planes,n=0;6>n;n++)if(i[n].distanceToPoint(t)<0)return!1;return!0},clone:function(){return(new Math3.Frustum).copy(this)}},Math3.Line3=function(t,i){this.start=void 0!==t?t:new Math3.Vector3,this.end=void 0!==i?i:new Math3.Vector3},Math3.Line3.prototype={constructor:Math3.Line3,set:function(t,i){return this.start.copy(t),this.end.copy(i),this},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},center:function(t){var i=t||new Math3.Vector3;return i.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){var i=t||new Math3.Vector3;return i.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,i){var n=i||new Math3.Vector3;return this.delta(n).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new Math3.Vector3,i=new Math3.Vector3;return function(n,r){t.subVectors(n,this.start),i.subVectors(this.end,this.start);var e=i.dot(i),s=i.dot(t),h=s/e;return r&&(h=Math3.Math.clamp(h,0,1)),h}}(),closestPointToPoint:function(t,i,n){var r=this.closestPointToPointParameter(t,i),e=n||new Math3.Vector3;return this.delta(e).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)},clone:function(){return(new Math3.Line3).copy(this)}},Math3.Math={generateUUID:function(){var t,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0;return function(){for(var e=0;36>e;e++)8==e||13==e||18==e||23==e?n[e]="-":14==e?n[e]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),t=15&r,r>>=4,n[e]=i[19==e?3&t|8:t]);return n.join("")}}(),clamp:function(t,i,n){return i>t?i:t>n?n:t},clampBottom:function(t,i){return i>t?i:t},mapLinear:function(t,i,n,r,e){return r+(t-i)*(e-r)/(n-i)},smoothstep:function(t,i,n){return i>=t?0:t>=n?1:(t=(t-i)/(n-i),t*t*(3-2*t))},smootherstep:function(t,i,n){return i>=t?0:t>=n?1:(t=(t-i)/(n-i),t*t*t*(t*(6*t-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,i){return Math.floor(this.randFloat(t,i))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(){var t=Math.PI/180;return function(i){return i*t}}(),radToDeg:function(){var t=180/Math.PI;return function(i){return i*t}}(),isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}},Math3.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&Math3.error("Math3.Matrix3: the constructor no longer reads arguments. use .set() instead.")},Math3.Matrix3.prototype={constructor:Math3.Matrix3,set:function(t,i,n,r,e,s,h,a,o){var u=this.elements;return u[0]=t,u[3]=i,u[6]=n,u[1]=r,u[4]=e,u[7]=s,u[2]=h,u[5]=a,u[8]=o,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(t){var i=t.elements;return this.set(i[0],i[3],i[6],i[1],i[4],i[7],i[2],i[5],i[8]),this},multiplyVector3:function(t){return Math3.warn("Math3.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return Math3.warn("Math3.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new Math3.Vector3;return function(i,n,r){void 0===n&&(n=0),void 0===r&&(r=i.length);for(var e=0,s=n;r>e;e+=3,s+=3)t.x=i[s],t.y=i[s+1],t.z=i[s+2],t.applyMatrix3(this),i[s]=t.x,i[s+1]=t.y,i[s+2]=t.z;return i}}(),multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this},determinant:function(){var t=this.elements,i=t[0],n=t[1],r=t[2],e=t[3],s=t[4],h=t[5],a=t[6],o=t[7],u=t[8];return i*s*u-i*h*o-n*e*u+n*h*a+r*e*o-r*s*a},getInverse:function(t,i){var n=t.elements,r=this.elements;r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4];var e=n[0]*r[0]+n[1]*r[3]+n[2]*r[6];if(0===e){var s="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(s);return Math3.warn(s),this.identity(),this}return this.multiplyScalar(1/e),this},transpose:function(){var t,i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this},flattenToArrayOffset:function(t,i){var n=this.elements;return t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3],t[i+4]=n[4],t[i+5]=n[5],t[i+6]=n[6],t[i+7]=n[7],t[i+8]=n[8],t},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},clone:function(){return(new Math3.Matrix3).fromArray(this.elements)}},Math3.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&Math3.error("Math3.Matrix4: the constructor no longer reads arguments. use .set() instead.")},Math3.Matrix4.prototype={constructor:Math3.Matrix4,set:function(t,i,n,r,e,s,h,a,o,u,c,l,y,m,x,f){var d=this.elements;return d[0]=t,d[4]=i,d[8]=n,d[12]=r,d[1]=e,d[5]=s,d[9]=h,d[13]=a,d[2]=o,d[6]=u,d[10]=c,d[14]=l,d[3]=y,d[7]=m,d[11]=x,d[15]=f,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(t){return this.elements.set(t.elements),this},extractPosition:function(t){return Math3.warn("Math3.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},copyPosition:function(t){var i=this.elements,n=t.elements;return i[12]=n[12],i[13]=n[13],i[14]=n[14],this},extractBasis:function(t,i,n){var r=this.elements;return t.set(r[0],r[1],r[2]),i.set(r[4],r[5],r[6]),n.set(r[8],r[9],r[10]),this},makeBasis:function(t,i,n){return this.set(t.x,i.x,n.x,0,t.y,i.y,n.y,0,t.z,i.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new Math3.Vector3;return function(i){var n=this.elements,r=i.elements,e=1/t.set(r[0],r[1],r[2]).length(),s=1/t.set(r[4],r[5],r[6]).length(),h=1/t.set(r[8],r[9],r[10]).length();return n[0]=r[0]*e,n[1]=r[1]*e,n[2]=r[2]*e,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[8]=r[8]*h,n[9]=r[9]*h,n[10]=r[10]*h,this}}(),makeRotationFromEuler:function(t){t instanceof Math3.Euler==!1&&Math3.error("Math3.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=this.elements,n=t.x,r=t.y,e=t.z,s=Math.cos(n),h=Math.sin(n),a=Math.cos(r),o=Math.sin(r),u=Math.cos(e),c=Math.sin(e);if("XYZ"===t.order){var l=s*u,y=s*c,m=h*u,x=h*c;i[0]=a*u,i[4]=-a*c,i[8]=o,i[1]=y+m*o,i[5]=l-x*o,i[9]=-h*a,i[2]=x-l*o,i[6]=m+y*o,i[10]=s*a}else if("YXZ"===t.order){var f=a*u,d=a*c,M=o*u,p=o*c;i[0]=f+p*h,i[4]=M*h-d,i[8]=s*o,i[1]=s*c,i[5]=s*u,i[9]=-h,i[2]=d*h-M,i[6]=p+f*h,i[10]=s*a}else if("ZXY"===t.order){var f=a*u,d=a*c,M=o*u,p=o*c;i[0]=f-p*h,i[4]=-s*c,i[8]=M+d*h,i[1]=d+M*h,i[5]=s*u,i[9]=p-f*h,i[2]=-s*o,i[6]=h,i[10]=s*a}else if("ZYX"===t.order){var l=s*u,y=s*c,m=h*u,x=h*c;i[0]=a*u,i[4]=m*o-y,i[8]=l*o+x,i[1]=a*c,i[5]=x*o+l,i[9]=y*o-m,i[2]=-o,i[6]=h*a,i[10]=s*a}else if("YZX"===t.order){var w=s*a,v=s*o,z=h*a,g=h*o;i[0]=a*u,i[4]=g-w*c,i[8]=z*c+v,i[1]=c,i[5]=s*u,i[9]=-h*u,i[2]=-o*u,i[6]=v*c+z,i[10]=w-g*c}else if("XZY"===t.order){var w=s*a,v=s*o,z=h*a,g=h*o;i[0]=a*u,i[4]=-c,i[8]=o*u,i[1]=w*c+g,i[5]=s*u,i[9]=v*c-z,i[2]=z*c-v,i[6]=h*u,i[10]=g*c+w}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},setRotationFromQuaternion:function(t){return Math3.warn("Math3.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},makeRotationFromQuaternion:function(t){var i=this.elements,n=t.x,r=t.y,e=t.z,s=t.w,h=n+n,a=r+r,o=e+e,u=n*h,c=n*a,l=n*o,y=r*a,m=r*o,x=e*o,f=s*h,d=s*a,M=s*o;return i[0]=1-(y+x),i[4]=c-M,i[8]=l+d,i[1]=c+M,i[5]=1-(u+x),i[9]=m-f,i[2]=l-d,i[6]=m+f,i[10]=1-(u+y),i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},lookAt:function(){var t=new Math3.Vector3,i=new Math3.Vector3,n=new Math3.Vector3;return function(r,e,s){var h=this.elements;return n.subVectors(r,e).normalize(),0===n.length()&&(n.z=1),t.crossVectors(s,n).normalize(),0===t.length()&&(n.x+=1e-4,t.crossVectors(s,n).normalize()),i.crossVectors(n,t),h[0]=t.x,h[4]=i.x,h[8]=n.x,h[1]=t.y,h[5]=i.y,h[9]=n.y,h[2]=t.z,h[6]=i.z,h[10]=n.z,this}}(),multiply:function(t,i){return void 0!==i?(Math3.warn("Math3.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,i){var n=t.elements,r=i.elements,e=this.elements,s=n[0],h=n[4],a=n[8],o=n[12],u=n[1],c=n[5],l=n[9],y=n[13],m=n[2],x=n[6],f=n[10],d=n[14],M=n[3],p=n[7],w=n[11],v=n[15],z=r[0],g=r[4],b=r[8],_=r[12],V=r[1],S=r[5],P=r[9],k=r[13],C=r[2],F=r[6],T=r[10],q=r[14],A=r[3],j=r[7],E=r[11],B=r[15];return e[0]=s*z+h*V+a*C+o*A,e[4]=s*g+h*S+a*F+o*j,e[8]=s*b+h*P+a*T+o*E,e[12]=s*_+h*k+a*q+o*B,e[1]=u*z+c*V+l*C+y*A,e[5]=u*g+c*S+l*F+y*j,e[9]=u*b+c*P+l*T+y*E,e[13]=u*_+c*k+l*q+y*B,e[2]=m*z+x*V+f*C+d*A,e[6]=m*g+x*S+f*F+d*j,e[10]=m*b+x*P+f*T+d*E,e[14]=m*_+x*k+f*q+d*B,e[3]=M*z+p*V+w*C+v*A,e[7]=M*g+p*S+w*F+v*j,e[11]=M*b+p*P+w*T+v*E,e[15]=M*_+p*k+w*q+v*B,this},multiplyToArray:function(t,i,n){var r=this.elements;return this.multiplyMatrices(t,i),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this},multiplyVector3:function(t){return Math3.warn("Math3.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return Math3.warn("Math3.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return Math3.warn("Math3.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new Math3.Vector3;return function(i,n,r){void 0===n&&(n=0),void 0===r&&(r=i.length);for(var e=0,s=n;r>e;e+=3,s+=3)t.x=i[s],t.y=i[s+1],t.z=i[s+2],t.applyMatrix4(this),i[s]=t.x,i[s+1]=t.y,i[s+2]=t.z;return i}}(),rotateAxis:function(t){Math3.warn("Math3.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return Math3.warn("Math3.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},determinant:function(){var t=this.elements,i=t[0],n=t[4],r=t[8],e=t[12],s=t[1],h=t[5],a=t[9],o=t[13],u=t[2],c=t[6],l=t[10],y=t[14],m=t[3],x=t[7],f=t[11],d=t[15];return m*(+e*a*c-r*o*c-e*h*l+n*o*l+r*h*y-n*a*y)+x*(+i*a*y-i*o*l+e*s*l-r*s*y+r*o*u-e*a*u)+f*(+i*o*c-i*h*y-e*s*c+n*s*y+e*h*u-n*o*u)+d*(-r*h*u-i*a*c+i*h*l+r*s*c-n*s*l+n*a*u)},transpose:function(){var t,i=this.elements;return t=i[1],i[1]=i[4],i[4]=t,t=i[2],i[2]=i[8],i[8]=t,t=i[6],i[6]=i[9],i[9]=t,t=i[3],i[3]=i[12],i[12]=t,t=i[7],i[7]=i[13],i[13]=t,t=i[11],i[11]=i[14],i[14]=t,this},flattenToArrayOffset:function(t,i){var n=this.elements;return t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3],t[i+4]=n[4],t[i+5]=n[5],t[i+6]=n[6],t[i+7]=n[7],t[i+8]=n[8],t[i+9]=n[9],t[i+10]=n[10],t[i+11]=n[11],t[i+12]=n[12],t[i+13]=n[13],t[i+14]=n[14],t[i+15]=n[15],t},getPosition:function(){var t=new Math3.Vector3;return function(){Math3.warn("Math3.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var i=this.elements;return t.set(i[12],i[13],i[14])}}(),setPosition:function(t){var i=this.elements;return i[12]=t.x,i[13]=t.y,i[14]=t.z,this},getInverse:function(t,i){var n=this.elements,r=t.elements,e=r[0],s=r[4],h=r[8],a=r[12],o=r[1],u=r[5],c=r[9],l=r[13],y=r[2],m=r[6],x=r[10],f=r[14],d=r[3],M=r[7],p=r[11],w=r[15];n[0]=c*f*M-l*x*M+l*m*p-u*f*p-c*m*w+u*x*w,n[4]=a*x*M-h*f*M-a*m*p+s*f*p+h*m*w-s*x*w,n[8]=h*l*M-a*c*M+a*u*p-s*l*p-h*u*w+s*c*w,n[12]=a*c*m-h*l*m-a*u*x+s*l*x+h*u*f-s*c*f,n[1]=l*x*d-c*f*d-l*y*p+o*f*p+c*y*w-o*x*w,n[5]=h*f*d-a*x*d+a*y*p-e*f*p-h*y*w+e*x*w,n[9]=a*c*d-h*l*d-a*o*p+e*l*p+h*o*w-e*c*w,n[13]=h*l*y-a*c*y+a*o*x-e*l*x-h*o*f+e*c*f,n[2]=u*f*d-l*m*d+l*y*M-o*f*M-u*y*w+o*m*w,n[6]=a*m*d-s*f*d-a*y*M+e*f*M+s*y*w-e*m*w,n[10]=s*l*d-a*u*d+a*o*M-e*l*M-s*o*w+e*u*w,n[14]=a*u*y-s*l*y-a*o*m+e*l*m+s*o*f-e*u*f,n[3]=c*m*d-u*x*d-c*y*M+o*x*M+u*y*p-o*m*p,n[7]=s*x*d-h*m*d+h*y*M-e*x*M-s*y*p+e*m*p,n[11]=h*u*d-s*c*d-h*o*M+e*c*M+s*o*p-e*u*p,n[15]=s*c*y-h*u*y+h*o*m-e*c*m-s*o*x+e*u*x;var v=e*n[0]+o*n[4]+y*n[8]+d*n[12];if(0==v){var z="Math3.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(z);return Math3.warn(z),this.identity(),this}return this.multiplyScalar(1/v),this},translate:function(t){Math3.error("Math3.Matrix4: .translate() has been removed.")},rotateX:function(t){Math3.error("Math3.Matrix4: .rotateX() has been removed.")},rotateY:function(t){Math3.error("Math3.Matrix4: .rotateY() has been removed.")},rotateZ:function(t){Math3.error("Math3.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(t,i){Math3.error("Math3.Matrix4: .rotateByAxis() has been removed.")},scale:function(t){var i=this.elements,n=t.x,r=t.y,e=t.z;return i[0]*=n,i[4]*=r,i[8]*=e,i[1]*=n,i[5]*=r,i[9]*=e,i[2]*=n,i[6]*=r,i[10]*=e,i[3]*=n,i[7]*=r,i[11]*=e,this},getMaxScaleOnAxis:function(){var t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,Math.max(n,r)))},makeTranslation:function(t,i,n){return this.set(1,0,0,t,0,1,0,i,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var i=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,i,-n,0,0,n,i,0,0,0,0,1),this},makeRotationY:function(t){var i=Math.cos(t),n=Math.sin(t);return this.set(i,0,n,0,0,1,0,0,-n,0,i,0,0,0,0,1),this},makeRotationZ:function(t){var i=Math.cos(t),n=Math.sin(t);return this.set(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,i){var n=Math.cos(i),r=Math.sin(i),e=1-n,s=t.x,h=t.y,a=t.z,o=e*s,u=e*h;
return this.set(o*s+n,o*h-r*a,o*a+r*h,0,o*h+r*a,u*h+n,u*a-r*s,0,o*a-r*h,u*a+r*s,e*a*a+n,0,0,0,0,1),this},makeScale:function(t,i,n){return this.set(t,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1),this},compose:function(t,i,n){return this.makeRotationFromQuaternion(i),this.scale(n),this.setPosition(t),this},decompose:function(){var t=new Math3.Vector3,i=new Math3.Matrix4;return function(n,r,e){var s=this.elements,h=t.set(s[0],s[1],s[2]).length(),a=t.set(s[4],s[5],s[6]).length(),o=t.set(s[8],s[9],s[10]).length(),u=this.determinant();0>u&&(h=-h),n.x=s[12],n.y=s[13],n.z=s[14],i.elements.set(this.elements);var c=1/h,l=1/a,y=1/o;return i.elements[0]*=c,i.elements[1]*=c,i.elements[2]*=c,i.elements[4]*=l,i.elements[5]*=l,i.elements[6]*=l,i.elements[8]*=y,i.elements[9]*=y,i.elements[10]*=y,r.setFromRotationMatrix(i),e.x=h,e.y=a,e.z=o,this}}(),makeFrustum:function(t,i,n,r,e,s){var h=this.elements,a=2*e/(i-t),o=2*e/(r-n),u=(i+t)/(i-t),c=(r+n)/(r-n),l=-(s+e)/(s-e),y=-2*s*e/(s-e);return h[0]=a,h[4]=0,h[8]=u,h[12]=0,h[1]=0,h[5]=o,h[9]=c,h[13]=0,h[2]=0,h[6]=0,h[10]=l,h[14]=y,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this},makePerspective:function(t,i,n,r){var e=n*Math.tan(Math3.Math.degToRad(.5*t)),s=-e,h=s*i,a=e*i;return this.makeFrustum(h,a,s,e,n,r)},makeOrthographic:function(t,i,n,r,e,s){var h=this.elements,a=i-t,o=n-r,u=s-e,c=(i+t)/a,l=(n+r)/o,y=(s+e)/u;return h[0]=2/a,h[4]=0,h[8]=0,h[12]=-c,h[1]=0,h[5]=2/o,h[9]=0,h[13]=-l,h[2]=0,h[6]=0,h[10]=-2/u,h[14]=-y,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},clone:function(){return(new Math3.Matrix4).fromArray(this.elements)}},Math3.Plane=function(t,i){this.normal=void 0!==t?t:new Math3.Vector3(1,0,0),this.constant=void 0!==i?i:0},Math3.Plane.prototype={constructor:Math3.Plane,set:function(t,i){return this.normal.copy(t),this.constant=i,this},setComponents:function(t,i,n,r){return this.normal.set(t,i,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new Math3.Vector3,i=new Math3.Vector3;return function(n,r,e){var s=t.subVectors(e,r).cross(i.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(s,n),this}}(),copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,i){return this.orthoPoint(t,i).sub(t).negate()},orthoPoint:function(t,i){var n=this.distanceToPoint(t),r=i||new Math3.Vector3;return r.copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(t){var i=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return 0>i&&n>0||0>n&&i>0},intersectLine:function(){var t=new Math3.Vector3;return function(i,n){var r=n||new Math3.Vector3,e=i.delta(t),s=this.normal.dot(e);if(0==s)return 0==this.distanceToPoint(i.start)?r.copy(i.start):void 0;var h=-(i.start.dot(this.normal)+this.constant)/s;return 0>h||h>1?void 0:r.copy(e).multiplyScalar(h).add(i.start)}}(),coplanarPoint:function(t){var i=t||new Math3.Vector3;return i.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new Math3.Vector3,i=new Math3.Vector3,n=new Math3.Matrix3;return function(r,e){var s=e||n.getNormalMatrix(r),h=t.copy(this.normal).applyMatrix3(s),a=this.coplanarPoint(i);return a.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(h,a),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant==this.constant},clone:function(){return(new Math3.Plane).copy(this)}},Math3.Quaternion=function(t,i,n,r){this._x=t||0,this._y=i||0,this._z=n||0,this._w=void 0!==r?r:1},Math3.Quaternion.prototype={constructor:Math3.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,i,n,r){return this._x=t,this._y=i,this._z=n,this._w=r,this.onChangeCallback(),this},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,i){if(t instanceof Math3.Euler==!1)throw new Error("Math3.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),r=Math.cos(t._y/2),e=Math.cos(t._z/2),s=Math.sin(t._x/2),h=Math.sin(t._y/2),a=Math.sin(t._z/2);return"XYZ"===t.order?(this._x=s*r*e+n*h*a,this._y=n*h*e-s*r*a,this._z=n*r*a+s*h*e,this._w=n*r*e-s*h*a):"YXZ"===t.order?(this._x=s*r*e+n*h*a,this._y=n*h*e-s*r*a,this._z=n*r*a-s*h*e,this._w=n*r*e+s*h*a):"ZXY"===t.order?(this._x=s*r*e-n*h*a,this._y=n*h*e+s*r*a,this._z=n*r*a+s*h*e,this._w=n*r*e-s*h*a):"ZYX"===t.order?(this._x=s*r*e-n*h*a,this._y=n*h*e+s*r*a,this._z=n*r*a-s*h*e,this._w=n*r*e+s*h*a):"YZX"===t.order?(this._x=s*r*e+n*h*a,this._y=n*h*e+s*r*a,this._z=n*r*a-s*h*e,this._w=n*r*e-s*h*a):"XZY"===t.order&&(this._x=s*r*e-n*h*a,this._y=n*h*e-s*r*a,this._z=n*r*a+s*h*e,this._w=n*r*e+s*h*a),i!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,i){var n=i/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var i,n=t.elements,r=n[0],e=n[4],s=n[8],h=n[1],a=n[5],o=n[9],u=n[2],c=n[6],l=n[10],y=r+a+l;return y>0?(i=.5/Math.sqrt(y+1),this._w=.25/i,this._x=(c-o)*i,this._y=(s-u)*i,this._z=(h-e)*i):r>a&&r>l?(i=2*Math.sqrt(1+r-a-l),this._w=(c-o)/i,this._x=.25*i,this._y=(e+h)/i,this._z=(s+u)/i):a>l?(i=2*Math.sqrt(1+a-r-l),this._w=(s-u)/i,this._x=(e+h)/i,this._y=.25*i,this._z=(o+c)/i):(i=2*Math.sqrt(1+l-r-a),this._w=(h-e)/i,this._x=(s+u)/i,this._y=(o+c)/i,this._z=.25*i),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,i,n=1e-6;return function(r,e){return void 0===t&&(t=new Math3.Vector3),i=r.dot(e)+1,n>i?(i=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,e),this._x=t.x,this._y=t.y,this._z=t.z,this._w=i,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,i){return void 0!==i?(Math3.warn("Math3.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var n=t._x,r=t._y,e=t._z,s=t._w,h=i._x,a=i._y,o=i._z,u=i._w;return this._x=n*u+s*h+r*o-e*a,this._y=r*u+s*a+e*h-n*o,this._z=e*u+s*o+n*a-r*h,this._w=s*u-n*h-r*a-e*o,this.onChangeCallback(),this},multiplyVector3:function(t){return Math3.warn("Math3.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var n=this._x,r=this._y,e=this._z,s=this._w,h=s*t._w+n*t._x+r*t._y+e*t._z;if(0>h?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,h=-h):this.copy(t),h>=1)return this._w=s,this._x=n,this._y=r,this._z=e,this;var a=Math.acos(h),o=Math.sqrt(1-h*h);if(Math.abs(o)<.001)return this._w=.5*(s+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(e+this._z),this;var u=Math.sin((1-i)*a)/o,c=Math.sin(i*a)/o;return this._w=s*u+this._w*c,this._x=n*u+this._x*c,this._y=r*u+this._y*c,this._z=e*u+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,i){return void 0===i&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this.onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new Math3.Quaternion(this._x,this._y,this._z,this._w)}},Math3.Quaternion.slerp=function(t,i,n,r){return n.copy(t).slerp(i,r)},Math3.Ray=function(t,i){this.origin=void 0!==t?t:new Math3.Vector3,this.direction=void 0!==i?i:new Math3.Vector3},Math3.Ray.prototype={constructor:Math3.Ray,set:function(t,i){return this.origin.copy(t),this.direction.copy(i),this},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,i){var n=i||new Math3.Vector3;return n.copy(this.direction).multiplyScalar(t).add(this.origin)},recast:function(){var t=new Math3.Vector3;return function(i){return this.origin.copy(this.at(i,t)),this}}(),closestPointToPoint:function(t,i){var n=i||new Math3.Vector3;n.subVectors(t,this.origin);var r=n.dot(this.direction);return 0>r?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(){var t=new Math3.Vector3;return function(i){var n=t.subVectors(i,this.origin).dot(this.direction);return 0>n?this.origin.distanceTo(i):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceTo(i))}}(),distanceSqToSegment:function(){var t=new Math3.Vector3,i=new Math3.Vector3,n=new Math3.Vector3;return function(r,e,s,h){t.copy(r).add(e).multiplyScalar(.5),i.copy(e).sub(r).normalize(),n.copy(this.origin).sub(t);var a,o,u,c,l=.5*r.distanceTo(e),y=-this.direction.dot(i),m=n.dot(this.direction),x=-n.dot(i),f=n.lengthSq(),d=Math.abs(1-y*y);if(d>0)if(a=y*x-m,o=y*m-x,c=l*d,a>=0)if(o>=-c)if(c>=o){var M=1/d;a*=M,o*=M,u=a*(a+y*o+2*m)+o*(y*a+o+2*x)+f}else o=l,a=Math.max(0,-(y*o+m)),u=-a*a+o*(o+2*x)+f;else o=-l,a=Math.max(0,-(y*o+m)),u=-a*a+o*(o+2*x)+f;else-c>=o?(a=Math.max(0,-(-y*l+m)),o=a>0?-l:Math.min(Math.max(-l,-x),l),u=-a*a+o*(o+2*x)+f):c>=o?(a=0,o=Math.min(Math.max(-l,-x),l),u=o*(o+2*x)+f):(a=Math.max(0,-(y*l+m)),o=a>0?l:Math.min(Math.max(-l,-x),l),u=-a*a+o*(o+2*x)+f);else o=y>0?-l:l,a=Math.max(0,-(y*o+m)),u=-a*a+o*(o+2*x)+f;return s&&s.copy(this.direction).multiplyScalar(a).add(this.origin),h&&h.copy(i).multiplyScalar(o).add(t),u}}(),isIntersectionSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},intersectSphere:function(){var t=new Math3.Vector3;return function(i,n){t.subVectors(i.center,this.origin);var r=t.dot(this.direction),e=t.dot(t)-r*r,s=i.radius*i.radius;if(e>s)return null;var h=Math.sqrt(s-e),a=r-h,o=r+h;return 0>a&&0>o?null:0>a?this.at(o,n):this.at(a,n)}}(),isIntersectionPlane:function(t){var i=t.distanceToPoint(this.origin);if(0===i)return!0;var n=t.normal.dot(this.direction);return 0>n*i?!0:!1},distanceToPlane:function(t){var i=t.normal.dot(this.direction);if(0==i)return 0==t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/i;return n>=0?n:null},intersectPlane:function(t,i){var n=this.distanceToPlane(t);return null===n?null:this.at(n,i)},isIntersectionBox:function(){var t=new Math3.Vector3;return function(i){return null!==this.intersectBox(i,t)}}(),intersectBox:function(t,i){var n,r,e,s,h,a,o=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,l=this.origin;return o>=0?(n=(t.min.x-l.x)*o,r=(t.max.x-l.x)*o):(n=(t.max.x-l.x)*o,r=(t.min.x-l.x)*o),u>=0?(e=(t.min.y-l.y)*u,s=(t.max.y-l.y)*u):(e=(t.max.y-l.y)*u,s=(t.min.y-l.y)*u),n>s||e>r?null:((e>n||n!==n)&&(n=e),(r>s||r!==r)&&(r=s),c>=0?(h=(t.min.z-l.z)*c,a=(t.max.z-l.z)*c):(h=(t.max.z-l.z)*c,a=(t.min.z-l.z)*c),n>a||h>r?null:((h>n||n!==n)&&(n=h),(r>a||r!==r)&&(r=a),0>r?null:this.at(n>=0?n:r,i)))},intersectTriangle:function(){var t=new Math3.Vector3,i=new Math3.Vector3,n=new Math3.Vector3,r=new Math3.Vector3;return function(e,s,h,a,o){i.subVectors(s,e),n.subVectors(h,e),r.crossVectors(i,n);var u,c=this.direction.dot(r);if(c>0){if(a)return null;u=1}else{if(!(0>c))return null;u=-1,c=-c}t.subVectors(this.origin,e);var l=u*this.direction.dot(n.crossVectors(t,n));if(0>l)return null;var y=u*this.direction.dot(i.cross(t));if(0>y)return null;if(l+y>c)return null;var m=-u*t.dot(r);return 0>m?null:this.at(m/c,o)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)},clone:function(){return(new Math3.Ray).copy(this)}},Math3.Sphere=function(t,i){this.center=void 0!==t?t:new Math3.Vector3,this.radius=void 0!==i?i:0},Math3.Sphere.prototype={constructor:Math3.Sphere,set:function(t,i){return this.center.copy(t),this.radius=i,this},setFromPoints:function(){var t=new Math3.Box3;return function(i,n){var r=this.center;void 0!==n?r.copy(n):t.setFromPoints(i).center(r);for(var e=0,s=0,h=i.length;h>s;s++)e=Math.max(e,r.distanceToSquared(i[s]));return this.radius=Math.sqrt(e),this}}(),copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i},clampPoint:function(t,i){var n=this.center.distanceToSquared(t),r=i||new Math3.Vector3;return r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(t){var i=t||new Math3.Box3;return i.set(this.center,this.center),i.expandByScalar(this.radius),i},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius},clone:function(){return(new Math3.Sphere).copy(this)}},Math3.Spline=function(t){function i(t,i,n,r,e,s,h){var a=.5*(n-t),o=.5*(r-i);return(2*(i-n)+a+o)*h+(-3*(i-n)-2*a-o)*s+a*e+i}this.points=t;var n,r,e,s,h,a,o,u,c,l=[],y={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var i=0;i<t.length;i++)this.points[i]={x:t[i][0],y:t[i][1],z:t[i][2]}},this.getPoint=function(t){return n=(this.points.length-1)*t,r=Math.floor(n),e=n-r,l[0]=0===r?r:r-1,l[1]=r,l[2]=r>this.points.length-2?this.points.length-1:r+1,l[3]=r>this.points.length-3?this.points.length-1:r+2,a=this.points[l[0]],o=this.points[l[1]],u=this.points[l[2]],c=this.points[l[3]],s=e*e,h=e*s,y.x=i(a.x,o.x,u.x,c.x,e,s,h),y.y=i(a.y,o.y,u.y,c.y,e,s,h),y.z=i(a.z,o.z,u.z,c.z,e,s,h),y},this.getControlPointsArray=function(){var t,i,n=this.points.length,r=[];for(t=0;n>t;t++)i=this.points[t],r[t]=[i.x,i.y,i.z];return r},this.getLength=function(t){var i,n,r,e,s=0,h=0,a=0,o=new Math3.Vector3,u=new Math3.Vector3,c=[],l=0;for(c[0]=0,t||(t=100),r=this.points.length*t,o.copy(this.points[0]),i=1;r>i;i++)n=i/r,e=this.getPoint(n),u.copy(e),l+=u.distanceTo(o),o.copy(e),s=(this.points.length-1)*n,h=Math.floor(s),h!=a&&(c[h]=l,a=h);return c[c.length]=l,{chunks:c,total:l}},this.reparametrizeByArcLength=function(t){var i,n,r,e,s,h,a,o,u=[],c=new Math3.Vector3,l=this.getLength();for(u.push(c.copy(this.points[0]).clone()),i=1;i<this.points.length;i++){for(h=l.chunks[i]-l.chunks[i-1],a=Math.ceil(t*h/l.total),e=(i-1)/(this.points.length-1),s=i/(this.points.length-1),n=1;a-1>n;n++)r=e+n*(1/a)*(s-e),o=this.getPoint(r),u.push(c.copy(o).clone());u.push(c.copy(this.points[i]).clone())}this.points=u}},Math3.Triangle=function(t,i,n){this.a=void 0!==t?t:new Math3.Vector3,this.b=void 0!==i?i:new Math3.Vector3,this.c=void 0!==n?n:new Math3.Vector3},Math3.Triangle.normal=function(){var t=new Math3.Vector3;return function(i,n,r,e){var s=e||new Math3.Vector3;s.subVectors(r,n),t.subVectors(i,n),s.cross(t);var h=s.lengthSq();return h>0?s.multiplyScalar(1/Math.sqrt(h)):s.set(0,0,0)}}(),Math3.Triangle.barycoordFromPoint=function(){var t=new Math3.Vector3,i=new Math3.Vector3,n=new Math3.Vector3;return function(r,e,s,h,a){t.subVectors(h,e),i.subVectors(s,e),n.subVectors(r,e);var o=t.dot(t),u=t.dot(i),c=t.dot(n),l=i.dot(i),y=i.dot(n),m=o*l-u*u,x=a||new Math3.Vector3;if(0==m)return x.set(-2,-1,-1);var f=1/m,d=(l*c-u*y)*f,M=(o*y-u*c)*f;return x.set(1-d-M,M,d)}}(),Math3.Triangle.containsPoint=function(){var t=new Math3.Vector3;return function(i,n,r,e){var s=Math3.Triangle.barycoordFromPoint(i,n,r,e,t);return s.x>=0&&s.y>=0&&s.x+s.y<=1}}(),Math3.Triangle.prototype={constructor:Math3.Triangle,set:function(t,i,n){return this.a.copy(t),this.b.copy(i),this.c.copy(n),this},setFromPointsAndIndices:function(t,i,n,r){return this.a.copy(t[i]),this.b.copy(t[n]),this.c.copy(t[r]),this},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new Math3.Vector3,i=new Math3.Vector3;return function(){return t.subVectors(this.c,this.b),i.subVectors(this.a,this.b),.5*t.cross(i).length()}}(),midpoint:function(t){var i=t||new Math3.Vector3;return i.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return Math3.Triangle.normal(this.a,this.b,this.c,t)},plane:function(t){var i=t||new Math3.Plane;return i.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,i){return Math3.Triangle.barycoordFromPoint(t,this.a,this.b,this.c,i)},containsPoint:function(t){return Math3.Triangle.containsPoint(t,this.a,this.b,this.c)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)},clone:function(){return(new Math3.Triangle).copy(this)}},Math3.Vector2=function(t,i){this.x=t||0,this.y=i||0},Math3.Vector2.prototype={constructor:Math3.Vector2,set:function(t,i){return this.x=t,this.y=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,i){return void 0!==i?(Math3.warn("Math3.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},sub:function(t,i){return void 0!==i?(Math3.warn("Math3.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){if(0!==t){var i=1/t;this.x*=i,this.y*=i}else this.x=0,this.y=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,i){return this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x),this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y),this},clampScalar:function(){var t,i;return function(n,r){return void 0===t&&(t=new Math3.Vector2,i=new Math3.Vector2),t.set(n,n),i.set(r,r),this.clamp(t,i)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,n=this.y-t.y;return i*i+n*n},setLength:function(t){var i=this.length();return 0!==i&&t!==i&&this.multiplyScalar(t/i),this},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this},lerpVectors:function(t,i,n){return this.subVectors(i,t).multiplyScalar(n).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t},fromAttribute:function(t,i,n){return void 0===n&&(n=0),i=i*t.itemSize+n,this.x=t.array[i],this.y=t.array[i+1],this},clone:function(){return new Math3.Vector2(this.x,this.y)}},Math3.Vector3=function(t,i,n){this.x=t||0,this.y=i||0,this.z=n||0},Math3.Vector3.prototype={constructor:Math3.Vector3,set:function(t,i,n){return this.x=t,this.y=i,this.z=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,i){return void 0!==i?(Math3.warn("Math3.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},sub:function(t,i){return void 0!==i?(Math3.warn("Math3.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},multiply:function(t,i){return void 0!==i?(Math3.warn("Math3.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this},applyEuler:function(){var t;return function(i){return i instanceof Math3.Euler==!1&&Math3.error("Math3.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new Math3.Quaternion),this.applyQuaternion(t.setFromEuler(i)),this}}(),applyAxisAngle:function(){var t;return function(i,n){return void 0===t&&(t=new Math3.Quaternion),this.applyQuaternion(t.setFromAxisAngle(i,n)),this}}(),applyMatrix3:function(t){var i=this.x,n=this.y,r=this.z,e=t.elements;return this.x=e[0]*i+e[3]*n+e[6]*r,this.y=e[1]*i+e[4]*n+e[7]*r,this.z=e[2]*i+e[5]*n+e[8]*r,this},applyMatrix4:function(t){var i=this.x,n=this.y,r=this.z,e=t.elements;return this.x=e[0]*i+e[4]*n+e[8]*r+e[12],this.y=e[1]*i+e[5]*n+e[9]*r+e[13],this.z=e[2]*i+e[6]*n+e[10]*r+e[14],this},applyProjection:function(t){var i=this.x,n=this.y,r=this.z,e=t.elements,s=1/(e[3]*i+e[7]*n+e[11]*r+e[15]);return this.x=(e[0]*i+e[4]*n+e[8]*r+e[12])*s,this.y=(e[1]*i+e[5]*n+e[9]*r+e[13])*s,this.z=(e[2]*i+e[6]*n+e[10]*r+e[14])*s,this},applyQuaternion:function(t){var i=this.x,n=this.y,r=this.z,e=t.x,s=t.y,h=t.z,a=t.w,o=a*i+s*r-h*n,u=a*n+h*i-e*r,c=a*r+e*n-s*i,l=-e*i-s*n-h*r;return this.x=o*a+l*-e+u*-h-c*-s,this.y=u*a+l*-s+c*-e-o*-h,this.z=c*a+l*-h+o*-s-u*-e,this},project:function(){var t;return function(i){return void 0===t&&(t=new Math3.Matrix4),t.multiplyMatrices(i.projectionMatrix,t.getInverse(i.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(i){return void 0===t&&(t=new Math3.Matrix4),t.multiplyMatrices(i.matrixWorld,t.getInverse(i.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var i=this.x,n=this.y,r=this.z,e=t.elements;return this.x=e[0]*i+e[4]*n+e[8]*r,this.y=e[1]*i+e[5]*n+e[9]*r,this.z=e[2]*i+e[6]*n+e[10]*r,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){if(0!==t){var i=1/t;this.x*=i,this.y*=i,this.z*=i}else this.x=0,this.y=0,this.z=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,i){return this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x),this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y),this.z<t.z?this.z=t.z:this.z>i.z&&(this.z=i.z),this},clampScalar:function(){var t,i;return function(n,r){return void 0===t&&(t=new Math3.Vector3,i=new Math3.Vector3),t.set(n,n,n),i.set(r,r,r),this.clamp(t,i)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var i=this.length();return 0!==i&&t!==i&&this.multiplyScalar(t/i),this},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},lerpVectors:function(t,i,n){return this.subVectors(i,t).multiplyScalar(n).add(t),this},cross:function(t,i){if(void 0!==i)return Math3.warn("Math3.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i);var n=this.x,r=this.y,e=this.z;return this.x=r*t.z-e*t.y,this.y=e*t.x-n*t.z,this.z=n*t.y-r*t.x,this},crossVectors:function(t,i){var n=t.x,r=t.y,e=t.z,s=i.x,h=i.y,a=i.z;return this.x=r*a-e*h,this.y=e*s-n*a,this.z=n*h-r*s,this},projectOnVector:function(){var t,i;return function(n){return void 0===t&&(t=new Math3.Vector3),t.copy(n).normalize(),i=this.dot(t),this.copy(t).multiplyScalar(i)}}(),projectOnPlane:function(){var t;return function(i){return void 0===t&&(t=new Math3.Vector3),t.copy(this).projectOnVector(i),this.sub(t)}}(),reflect:function(){var t;return function(i){return void 0===t&&(t=new Math3.Vector3),this.sub(t.copy(i).multiplyScalar(2*this.dot(i)))}}(),angleTo:function(t){var i=this.dot(t)/(this.length()*t.length());return Math.acos(Math3.Math.clamp(i,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return i*i+n*n+r*r},setEulerFromRotationMatrix:function(t,i){Math3.error("Math3.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(t,i){Math3.error("Math3.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return Math3.warn("Math3.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return Math3.warn("Math3.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,i){return Math3.warn("Math3.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,i)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var i=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),n=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),r=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=i,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,i){var n=4*t,r=i.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t},fromAttribute:function(t,i,n){return void 0===n&&(n=0),i=i*t.itemSize+n,this.x=t.array[i],this.y=t.array[i+1],this.z=t.array[i+2],this},clone:function(){return new Math3.Vector3(this.x,this.y,this.z)}},Math3.Vector4=function(t,i,n,r){this.x=t||0,this.y=i||0,this.z=n||0,this.w=void 0!==r?r:1},Math3.Vector4.prototype={constructor:Math3.Vector4,set:function(t,i,n,r){return this.x=t,this.y=i,this.z=n,this.w=r,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,i){return void 0!==i?(Math3.warn("Math3.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this},sub:function(t,i){return void 0!==i?(Math3.warn("Math3.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var i=this.x,n=this.y,r=this.z,e=this.w,s=t.elements;return this.x=s[0]*i+s[4]*n+s[8]*r+s[12]*e,this.y=s[1]*i+s[5]*n+s[9]*r+s[13]*e,this.z=s[2]*i+s[6]*n+s[10]*r+s[14]*e,this.w=s[3]*i+s[7]*n+s[11]*r+s[15]*e,
this},divideScalar:function(t){if(0!==t){var i=1/t;this.x*=i,this.y*=i,this.z*=i,this.w*=i}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var i=Math.sqrt(1-t.w*t.w);return 1e-4>i?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this},setAxisAngleFromRotationMatrix:function(t){var i,n,r,e,s=.01,h=.1,a=t.elements,o=a[0],u=a[4],c=a[8],l=a[1],y=a[5],m=a[9],x=a[2],f=a[6],d=a[10];if(Math.abs(u-l)<s&&Math.abs(c-x)<s&&Math.abs(m-f)<s){if(Math.abs(u+l)<h&&Math.abs(c+x)<h&&Math.abs(m+f)<h&&Math.abs(o+y+d-3)<h)return this.set(1,0,0,0),this;i=Math.PI;var M=(o+1)/2,p=(y+1)/2,w=(d+1)/2,v=(u+l)/4,z=(c+x)/4,g=(m+f)/4;return M>p&&M>w?s>M?(n=0,r=.707106781,e=.707106781):(n=Math.sqrt(M),r=v/n,e=z/n):p>w?s>p?(n=.707106781,r=0,e=.707106781):(r=Math.sqrt(p),n=v/r,e=g/r):s>w?(n=.707106781,r=.707106781,e=0):(e=Math.sqrt(w),n=z/e,r=g/e),this.set(n,r,e,i),this}var b=Math.sqrt((f-m)*(f-m)+(c-x)*(c-x)+(l-u)*(l-u));return Math.abs(b)<.001&&(b=1),this.x=(f-m)/b,this.y=(c-x)/b,this.z=(l-u)/b,this.w=Math.acos((o+y+d-1)/2),this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this.w>t.w&&(this.w=t.w),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this.w<t.w&&(this.w=t.w),this},clamp:function(t,i){return this.x<t.x?this.x=t.x:this.x>i.x&&(this.x=i.x),this.y<t.y?this.y=t.y:this.y>i.y&&(this.y=i.y),this.z<t.z?this.z=t.z:this.z>i.z&&(this.z=i.z),this.w<t.w?this.w=t.w:this.w>i.w&&(this.w=i.w),this},clampScalar:function(){var t,i;return function(n,r){return void 0===t&&(t=new Math3.Vector4,i=new Math3.Vector4),t.set(n,n,n,n),i.set(r,r,r,r),this.clamp(t,i)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var i=this.length();return 0!==i&&t!==i&&this.multiplyScalar(t/i),this},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this},lerpVectors:function(t,i,n){return this.subVectors(i,t).multiplyScalar(n).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t},fromAttribute:function(t,i,n){return void 0===n&&(n=0),i=i*t.itemSize+n,this.x=t.array[i],this.y=t.array[i+1],this.z=t.array[i+2],this.w=t.array[i+3],this},clone:function(){return new Math3.Vector4(this.x,this.y,this.z,this.w)}}}();